<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="hallsearch">
 	
 <select id="hallsearchSQL" resultType="hall.model.HallDTO">
    select * from hall order by idx desc
 
 </select>
    
    


<<<<<<< HEAD
	<select id="hall_searchview1" parameterType="map" resultType="hall.model.HallDTO">
		select * from hall where hallType like '%'||#{hallType}||'%' and menuType like '%'||#{menuType}||'%'
		<choose>
			<when test="meal_price eq 0">
				<![CDATA[ and idx in (select hall_idx from hall_estimate where meal_price <= 30000 or meal_price2 <= 30000)]]>
			</when>
			<when test="meal_price eq 60000">
				<![CDATA[ and idx in (select hall_idx from hall_estimate where meal_price >= 60000 or meal_price2 >= 60000)]]>
			</when>
			<otherwise>
				<![CDATA[ and idx in (select hall_idx from hall_estimate where (meal_price between #{meal_price} and #{meal_price}+10000) or (meal_price2 between #{meal_price} and #{meal_price}+10000))]]>
			</otherwise>
		</choose>
		<choose>
			<when test="est_guest eq 0">
				<![CDATA[ and idx in (select hall_idx from hall_estimate where est_guest<=100)]]>
			</when>
			<when test="est_guest eq 100">
				<![CDATA[ and idx in (select hall_idx from hall_estimate where est_guest>=300)]]>
			</when>
			<otherwise>
				<![CDATA[ and idx in (select hall_idx from hall_estimate where est_guest between #{est_guest} and #{est_guest}+100)]]>
			</otherwise>
		</choose>
	</select>
	
=======
<!--   where name=#{name} and hallType=#{hallType} and menuType=#{menuType} and 
  mealCost=#{mealCost} and guest=#{guest} order by idx desc -->
 <select id="hall_searchview1" parameterType="map"  resultType="hall.model.HallDTO">
 	select * from hall where hallType like '%#{hallType}%' and menuType like '%#{menuType}%' 
 	<!-- <if test="hallType!=null">
 	 and hallType like '%#{hallType}%'
 	 </if> -->
 	 <!-- <if test="menuType!=null">
 	 and menuType like '%#{menuType}%'
 	 </if> -->
 	 <if test="line!=null">
 	and line = #{line} 
 	 </if>
 	  <if test="name!=null">
 	 and name = #{name} 
 	 </if>
</select>
<select id="hall_searchview2" resultType="hallEstimate.model.HalleDTO">
select * from hall_estimate where est_guest like '%#{est_guest}%' and meal_price like '%#{meal_price}'
>>>>>>> branch 'master' of https://github.com/BAMSU/testWeb

<<<<<<< HEAD

	<select id="hall_estlistSQL" parameterType="map" resultType="hallEstimate.model.HalleDTO">
		select * from hall_estimate order by hall_idx desc
	</select>

	<select id="hallranking" resultType="hall.model.HallDTO">
		select * from hall order by accrue desc
	</select>

	<select id="hallemt" resultType="hallEstimate.model.HalleDTO">
		select hall.idx,hall_estimate.hall_idx from hall,hall_estimate
		where hall.idx = hall_estimate.hall_idx
	</select>

	<select id="hall3" resultType="hallEstimate.model.HalleDTO"	parameterType="int">
		select * from hall_estimate where hall_idx = #{idx}
	</select>
	
	<select id="hall4" resultType="hall.model.HallDTO"	parameterType="int">
		select * from hall where idx = #{idx}
	</select>

	<select id="hallroom" resultType="room.model.RoomDTO" parameterType="int">
		select * from room where hallIdx=#{idx}
	</select>
	
	<select id="hallstation" resultType="String" parameterType="String">
		select distinct station from hall where line=#{line}
	</select>
	
	<select id="linesear" resultType="hall.model.HallDTO" parameterType="String">
		select * from hall where station =#{station}
	</select>
	
	<select id="hallnamelist" resultType="hall.model.HallDTO" parameterType="String">
		select * from hall where name like '%'||#{name}||'%'
	</select>
	
	
	
=======
</select>
	 	
 	<select id="hall_estlistSQL" parameterType="map" resultType="hallEstimate.model.HalleDTO">
 	select * from hall_estimate order by idx desc
 	</select>
 	
 

 	  <select id="hall_rankSQL" resultType="review.model.ReviewDTO">
 	  select * from hallreview order by idx desc
 	  </select>
 	  
 	  
    <!-- <insert id="hall_estlistSQL2" parameterType="yong.hall.model.HalleDTO">
  <![CDATA[
  insert into hall_estimate values(hall_estimate_idx.nextval,#{hall_name},
  #{est_guest},#{gestalt},#{guest},#{interval},#{hall_product},
  #{hall_price},#{hall_note},#{hall_content},#{meal},#{meal_price},
  #{meal_content},
  #{drink_type},#{drink_price},#{volume})]]>
  </insert>  -->
 
 	
 	<!--  	<update id="hall_estimateSQL" parameterType="yong.hall.model.HalleDTO">
 	update hall_estimate set hall_name=#{hall_name},hall_type=#{hall_type},
 	gestalt=#{gestalt},guest=#{guest},interval=#{interval},hall_product=#{hall_product},
 	hall_price=#{hall_price},hall_note=#{hall_note},hall_content=#{hall_content},
 	meal=#{meal},meal_price=#{meal_price},meal_content=#{meal_content},drink_type=#{drink_type},
 	drink_price=#{drink_price},volume=#{volume} where idx=#{idx}
 	</update> -->
 
>>>>>>> branch 'master' of https://github.com/BAMSU/testWeb
</mapper>